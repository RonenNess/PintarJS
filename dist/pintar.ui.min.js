(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}(g.PintarJS||(g.PintarJS={})).UI=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){"use strict";module.exports={TopLeft:"TopLeft",TopCenter:"TopCenter",TopRight:"TopRight",CenterLeft:"CenterLeft",Center:"Center",CenterRight:"CenterRight",BottomLeft:"BottomLeft",BottomCenter:"BottomCenter",BottomCenterRight:"BottomCenterRight",Auto:"Auto",AutoInline:"AutoInline"}},{}],2:[function(require,module,exports){"use strict";const UIElement=require("./ui_element");const PintarJS=require("./pintar");const Sides=require("./sides");const SizeModes=require("./size_modes");const Anchors=require("./anchors");class Container extends UIElement{constructor(){super();this._children=[];this.padding=new Sides(10,10,10,10);this.paddingMode=SizeModes.Pixels}addChild(element){if(element.parent){throw new Error("Element to add already have a parent!")}this._children.push(element);element._setParent(this)}removeChild(element){if(element.parent!==this){throw new Error("Element to remove does not belong to this container!")}var index=this._children.indexOf(element);if(index!==-1){this._children.splice(index,1);element._setParent(null)}}getInternalBoundingBox(){var ret=this.getBoundingBox();var padding=this._convertSides(this.padding,this.paddingMode);ret.x+=padding.left;ret.y+=padding.top;ret.width-=padding.right+padding.left;ret.height-=padding.bottom+padding.top;return ret}draw(pintar){for(var i=0;i<this._children.length;++i){this._children[i].draw(pintar)}}update(input){super.update(input);var lastElement=null;for(var i=0;i<this._children.length;++i){var element=this._children[i];var needToSetAuto=false;if(element.anchor===Anchors.AutoInline){if(lastElement){element.offset.set(0,lastElement.offset.y+lastElement.size.y);if(element.offset.x>this.size.x){needToSetAuto=true}}else{element.offset.set(0,0)}}if(needToSetAuto||element.anchor===Anchors.Auto){if(lastElement){element.offset.set(0,lastElement.offset.y+lastElement.size.y)}else{element.offset.set(0,0)}}element.update(input);lastElement=element}}}module.exports=Container},{"./anchors":1,"./pintar":5,"./sides":7,"./size_modes":8,"./ui_element":10}],3:[function(require,module,exports){var UI={UIElement:require("./ui_element"),ProgressBar:require("./progress_bar"),InputManager:require("./input_manager"),Container:require("./container"),Anchors:require("./anchors"),SlicedSprite:require("./sliced_sprite"),SizeModes:require("./size_modes")};const pintar=require("./pintar");pintar.UI=UI;module.exports=UI},{"./anchors":1,"./container":2,"./input_manager":4,"./pintar":5,"./progress_bar":6,"./size_modes":8,"./sliced_sprite":9,"./ui_element":10}],4:[function(require,module,exports){"use strict";class InputManager{get mousePosition(){throw new Error("Not Implemented!")}get isLeftMouseDown(){throw new Error("Not Implemented!")}get isRightMouseDown(){throw new Error("Not Implemented!")}get mouseWheelChange(){throw new Error("Not Implemented!")}}module.exports=InputManager},{}],5:[function(require,module,exports){var pintar=window.PintarJS||window.pintar;if(!pintar){throw new Error("Missing PintarJS main object.")}module.exports=pintar},{}],6:[function(require,module,exports){"use strict";const UIElement=require("./ui_element");const PintarJS=require("./pintar");class ProgressBar extends UIElement{constructor(texture,backgroundSourceRect,fillSourceRect,widthInPixels,fillOffset){super();if(typeof texture=="string"){texture=new PintarJS.Texture(texture)}this.fillOffset=fillOffset||PintarJS.Point.zero();this.backgroundSourceRect=backgroundSourceRect;this.fillSourceRect=fillSourceRect;this.barBackground=new PintarJS.Sprite(texture);this.barBackground.origin.x=0;this.barBackground.sourceRectangle=this.backgroundSourceRect;this.barFill=new PintarJS.Sprite(texture);this.barFill.origin.x=0;this.widthInPixels=widthInPixels;this.value=1}set widthInPixels(widthInPixels){this.scaleFactor=widthInPixels?widthInPixels/this.backgroundSourceRect.width:this.backgroundSourceRect.width;this.size.set(this.backgroundSourceRect.width*this.scaleFactor,this.backgroundSourceRect.height*this.scaleFactor)}get fillColor(){return this.barFill.color}set fillColor(color){this.barFill.color=color}get fillBlendMode(){return this.barFill.blendMode}set fillBlendMode(blendMode){this.barFill.blendMode=blendMode}draw(pintar){this.widthInPixels=this.getSizeInPixels().x;var scale=this.scaleFactor;var position=this.getDestTopLeftPosition();this.barBackground.position.set(position.x,position.y);this.barFill.position.set(position.x+this.fillOffset.x*scale,position.y+this.fillOffset.y*scale);this.barBackground.size.set(this.size.x,this.size.y);pintar.drawSprite(this.barBackground);if(this.barFill.width>0){this.barFill.size.set(this.fillSourceRect.width*scale*this.value,this.fillSourceRect.height*scale);this.barFill.sourceRectangle=this.fillSourceRect.clone();this.barFill.sourceRectangle.width*=this.value;pintar.drawSprite(this.barFill)}}}module.exports=ProgressBar},{"./pintar":5,"./ui_element":10}],7:[function(require,module,exports){"use strict";class Sides{constructor(left,right,top,bottom){this.left=left||0;this.right=right||0;this.top=top||0;this.bottom=bottom||0}set(left,right,top,bottom){this.left=left;this.right=right;this.top=top;this.bottom=bottom}clone(){return new Sides(this.left,this.right,this.top,this.bottom)}}module.exports=Sides},{}],8:[function(require,module,exports){"use strict";module.exports={Pixels:"px",Percents:"%"}},{}],9:[function(require,module,exports){"use strict";const PintarJS=require("./pintar");const UIElement=require("./ui_element");class SlicedSprite extends UIElement{constructor(texture,wholeSourceRect,fillSourceRect,frameScale,fillMode){super();if(typeof texture=="string"){texture=new PintarJS.Texture(texture)}this.wholeSourceRect=wholeSourceRect;this.fillSourceRect=fillSourceRect;this.leftFrameSourceRect=new PintarJS.Rectangle(wholeSourceRect.x,fillSourceRect.y,fillSourceRect.x-wholeSourceRect.x,fillSourceRect.height);this.rightFrameSourceRect=new PintarJS.Rectangle(fillSourceRect.right,fillSourceRect.y,wholeSourceRect.right-fillSourceRect.right,fillSourceRect.height);this.topFrameSourceRect=new PintarJS.Rectangle(fillSourceRect.x,wholeSourceRect.y,fillSourceRect.width,fillSourceRect.y-wholeSourceRect.y);this.bottomFrameSourceRect=new PintarJS.Rectangle(fillSourceRect.x,fillSourceRect.bottom,fillSourceRect.width,wholeSourceRect.bottom-fillSourceRect.bottom);this.topFrameSprite=new PintarJS.Sprite(texture);this.topFrameSprite.sourceRectangle=this.topFrameSourceRect;this.topFrameSprite.origin=PintarJS.Point.zero();this.frameScale=frameScale||1;this.fillMode=fillMode||SlicedSprite.FillModes.Stretch}draw(pintar){var position=this.getDestTopLeftPosition();var size=this.getSizeInPixels();var scaleFactor=this.absoluteScale;var frameScale=scaleFactor*this.frameScale;this.topFrameSprite.position=position;this.topFrameSprite.width=this.topFrameSprite.sourceRectangle.width*frameScale;this.topFrameSprite.height=this.topFrameSprite.sourceRectangle.height*frameScale;while(this.topFrameSprite.position.x+this.topFrameSprite.width<position.x+size.x){pintar.drawSprite(this.topFrameSprite);this.topFrameSprite.position.x+=this.topFrameSprite.width}pintar.drawSprite(this.topFrameSprite)}}SlicedSprite.FillModes={Stretch:0,Tiled:1};module.exports=SlicedSprite},{"./pintar":5,"./ui_element":10}],10:[function(require,module,exports){"use strict";const PintarJS=require("./pintar");const Anchors=require("./anchors");const SizeModes=require("./size_modes");const Sides=require("./sides");class UIElement{constructor(){this.offset=PintarJS.Point.zero();this.offsetMode=SizeModes.Pixels;this.size=new PintarJS.Point(100,100);this.sizeMode=SizeModes.Pixels;this.anchor=Anchors.TopLeft;this.scale=1;this.__parent=null}_setParent(parent){this.__parent=parent}get absoluteScale(){return this.scale*UIElement.globalScale}_convertSize(val,mode){switch(mode){case SizeModes.Pixels:var ret=val.clone();var scale=this.absoluteScale;ret.x*=scale;ret.y*=scale;return ret;case SizeModes.Percents:var parentSize=this.getParentBoundingBox().size;return new PintarJS.Point(val.x/100*parentSize.x,val.y/100*parentSize.y);default:throw new Error("Invalid size mode!")}}_convertSides(val,mode){switch(mode){case SizeModes.Pixels:var ret=val.clone();var scale=this.absoluteScale;ret.left*=scale;ret.right*=scale;ret.top*=scale;ret.bottom*=scale;return ret;case SizeModes.Percents:var parentSize=this.getParentBoundingBox().size;return new Sides(val.left/100*parentSize.x,val.right/100*parentSize.x,val.top/100*parentSize.y,val.bottom/100*parentSize.y);default:throw new Error("Invalid size mode!")}}getSizeInPixels(){return this._convertSize(this.size,this.sizeMode)}getOffsetInPixels(){return this._convertSize(this.offset,this.offsetMode)}get parent(){return this.__parent}draw(pintar){throw new Error("Not Implemented!")}update(input){throw new Error("Not Implemented!")}getBoundingBox(){var position=this.getDestTopLeftPosition();var size=this.size;return new PintarJS.Rectangle(position.x,position.y,size.x,size.y)}getInternalBoundingBox(){return this.getBoundingBox()}getParentBoundingBox(){return this.parent?this.parent.getInternalBoundingBox():new PintarJS.Rectangle(0,0,window.innerWidth,window.innerHeight)}getDestTopLeftPosition(){var parentRect=this.getParentBoundingBox();var selfSize=this.getSizeInPixels();var offset=this.getOffsetInPixels();var ret=new PintarJS.Point;if(this.__cachedTopLeftPos&&this.anchor===this.__lastAnchor&&selfSize.equals(this.__lastSize||PintarJS.Point.zero())&&offset.equals(this.__lastOffset||PintarJS.Point.zero())&&parentRect.equals(this.__lastParentRect||new PintarJS.Rectangle)){return this.__cachedTopLeftPos}switch(this.anchor){case Anchors.TopLeft:ret.set(parentRect.x,parentRect.y);break;case Anchors.TopCenter:ret.set(parentRect.x+parentRect.width/2-selfSize.x/2,parentRect.y);break;case Anchors.TopRight:ret.set(parentRect.right-selfSize.x,parentRect.y);break;case Anchors.CenterLeft:ret.x=parentRect.x;ret.y=parentRect.y+parentRect.height/2-selfSize.y/2;break;case Anchors.Center:ret.x=parentRect.x+parentRect.width/2-selfSize.x/2;ret.y=parentRect.y+parentRect.height/2-selfSize.y/2;break;case Anchors.CenterRight:ret.x=parentRect.right-selfSize.x;ret.y=parentRect.y+parentRect.height/2-selfSize.y/2;break;case Anchors.BottomLeft:ret.x=parentRect.x;ret.y=parentRect.bottom-selfSize.y;break;case Anchors.BottomCenter:ret.x=parentRect.x+parentRect.width/2-selfSize.x/2;ret.y=parentRect.bottom-selfSize.y;break;case Anchors.BottomRight:ret.x=parentRect.right-selfSize.x;ret.y=parentRect.bottom-selfSize.y;break}ret.x+=offset.x;ret.y+=offset.y;this.__cachedTopLeftPos=ret.clone();this.__lastAnchor=this.anchor;this.__lastSize=selfSize;this.__lastOffset=offset;this.__lastParentRect=parentRect.clone();return ret}getCenterPosition(){var bb=this.getBoundingBox();return bb.getCenter()}}UIElement.globalScale=1;module.exports=UIElement},{"./anchors":1,"./pintar":5,"./sides":7,"./size_modes":8}]},{},[3])(3)});